- if @short
  %h2
    %a{:href => "/post/#{@post.slug}", :title => "View this post"}= @post.title
- else
  %h2= @post.title
.post-contents
  = Honk.format_proc.call @post.contents
.post-details
  %span.post-tags
    Tags:
    - if @post.tags.empty?
      none
    - else
      = @post.tags.collect {|t| tag_link t }.join(', ')
    |
    %span.post-timestamp== Posted on #{@post.timestamp}
    - if @short
      |
      - if @post.commentable
        = comments_link @post
      - else
        %span.post-comment-info Comments closed.

- unless @short
  - if @post.commentable
    %h3 Comments
    .post-comments
      - @post.comments.each_with_index do |c, n|
        %div.comment{:id => "comment-%s" % n}
          .comment-info
            %span.author
              - if c.website
                %a{:href => c.website, :title => "View website"}= c.author
              - else
                = c.author
            %span.timestamp
              = c.timestamp
          .comment-contents
            = c.contents
  - else
    %h3 Comments are disabled for this post.
